<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>控制面板</title>
</head>
<body>
    <h2>控制面板</h2>
    <div>歡迎來到控制面板, {{ username }}</div>
    <div>
        <form method="POST" action="/search">
            {% for field in query_fields %}
            <div>
                <input type="checkbox" name="use_{{ field.id }}" id="use_{{ field.id }}">
                <label for="{{ field.id }}">{{ field.label }}:</label>
                <input type="text" name="{{ field.db_key }}" id="{{ field.id }}">
            </div>
            {% endfor %}
            <button type="submit">提交</button>
        </form>
    </div>
    
    <!-- 查詢結果 -->
    <div>
    {% if data %}
        <h3>查詢結果</h3>
        {% for item in data %}
        <div>
            <p>Data ID: {{item['_id'] or 'No data'}}</p>
            <p>病史: {{ item['病史'] or 'No data'}}</p>
            <p>診斷資料號: {{ item['診斷資料號'] or 'No data'}}</p>
            <!-- 可以添加其他字段的顯示 -->
            &nbsp
        </div>
        {% endfor %}
    {% else %}
        <p>{{ msg }}</p>
    {% endif %}
    </div>
</body>
</html>