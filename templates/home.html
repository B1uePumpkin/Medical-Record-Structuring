<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <title>主頁面</title>
    <!-- logo -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body>
    <div class="container mt-5">
      <h2 class="text-center">主頁面</h2>
      <div class="text-center">歡迎來到主頁面, {{ username }}</div>
      <hr />
      <!-- page tab button -->
      <div class="d-flex justify-content-center my-4">
        <a href="/instructions" class="btn btn-primary mx-2">使用說明</a>
        <a href="/control_panel" class="btn btn-primary mx-2">控制面板</a>
      </div>

      <form id="submitForm" method="POST" action="/generate">
        <h1 class="fw-bold text-center mb-4">病歷結構化系統</h1>
        <label for="prompt">請輸入病歷：</label>
        <textarea
          name="prompt"
          rows="15"
          class="form-control mb-3"
          id="prompt"
        ></textarea>
        <button type="submit" class="btn btn-primary w-100" id="submitBtn">
          <span
            class="spinner-border spinner-border-sm"
            role="status"
            aria-hidden="true"
            id="spinner"
            style="display: none"
          ></span>
          提交
        </button>
      </form>

      <div class="result mt-5">
        <table class="table table-striped">
          <tr>
            <td>{{response_content}}</td>
          </tr>
        </table>

        <!-- 新增下載按鈕並套用bootstrap樣式 -->
        <!-- <div class="d-flex justify-content-center my-4">
          <a href="/download_txt" class="btn btn-primary mx-2"
            >下載病例表格 (txt)</a
          >
          <a href="/download_word" class="btn btn-primary mx-2"
            >下載病例表格 (docx)</a
          >
        </div>-->
      </div>
      <div class="text-center mt-4">
        <a href="/logout" class="btn btn-danger">登出</a>
      </div>
    </div>

    {% if alert %}
    <script>
      alert("{{ alert }}");
    </script>
    {% endif %}
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
